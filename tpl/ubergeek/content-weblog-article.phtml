<?php
/* @var $this Ubergeek\NanoCm\Module\CoreModule */
$medium = null;
$imgFormat = null;
$class = ($this->article->articleType instanceof \Ubergeek\NanoCm\Definition)? $this->article->articleType->value : '';

if (!empty($this->article->medium_id)) {
    if (($imgFormat = $this->orm->getImageFormatByKey('banner')) !== null) {
        $medium = $this->orm->getMediumById($this->article->medium_id);
    }
}
?>

<div class="container spacing <?php echo $class; ?>">
    <h1><?php echo $this->htmlEncode($this->article->headline); ?></h1>

    <?php if ($imgFormat != null && $medium != null) : ?>
        <img src="<?php echo $this->htmlEncode($medium->getImageUrl($imgFormat->key)); ?>" alt=""
             title="<?php echo $this->htmlEncode($medium->title); ?>"
            <?php if ($imgFormat->width > 0) echo "width=\"$imgFormat->width\""; ?>
            <?php if ($imgFormat->height > 0) echo "height=\"$imgFormat->height\""; ?>
        >
    <?php endif; ?>

    <?php echo $this->ncm->convertFormattedText($this->article->content); ?>
</div>
