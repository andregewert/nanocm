<!DOCTYPE html>
<?php /* @var $this \Ubergeek\NanoCm\Module\AbstractModule */ ?>
<html lang="<?php echo $this->htmlEncode($this->ncm->lang); ?>">
    <head>
        <meta charset="utf-8">        
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title><?php echo $this->htmlEncode($this->getTitle()); ?></title>
        <link rel="stylesheet" href="<?php echo $this->htmlConvUrl('/tpl/ubergeek/css/frame.css'); ?>" />
        <link rel="stylesheet" href="<?php echo $this->htmlConvUrl('/tpl/ubergeek/css/content.css'); ?>" />
        <link href="https://fonts.googleapis.com/css?family=Oswald|Source+Sans+Pro:400,400i,600,600i" rel="stylesheet">
        <link rel="icon" type="image/png" sizes="32x32" href="<?php echo $this->htmlConvUrl('/tpl/ubergeek/img/favicon-32x32.png'); ?>">
        <link href="<?php echo $this->htmlConvUrl('/tpl/ubergeek/ext/lightbox/css/lightbox.css'); ?>" rel="stylesheet">
        <link href="<?php echo $this->htmlConvUrl('/tpl/ubergeek/ext/highlight/styles/default.css'); ?>" rel="stylesheet">
        <script src=" <?php echo $this->htmlConvUrl('/tpl/ubergeek/ext/highlight/highlight.pack.js'); ?>"></script>
        <meta name="theme-color" content="#000000">
    </head>
    <body>
        <header>
            <div class="container brand">
                <a class="nonprint" href="<?php echo $this->htmlConvUrl('/'); ?>"><img src="<?php echo $this->htmlConvUrl('tpl/ubergeek/img/ubergeek-logo.png'); ?>" width="346" height="38" alt="<?php echo $this->htmlEncode($this->getSiteTitle()); ?>" /></a>
                <img class="printonly" src="<?php echo $this->htmlConvUrl('tpl/ubergeek/img/ubergeek-logo-black.png'); ?>" width="346" height="38" alt="<?php echo $this->htmlEncode($this->getSiteTitle()); ?>" />
                <?php echo $this->includeUserTemplate('navigation-meta.phtml'); ?>
            </div>
        </header>

        <?php echo $this->includeUserTemplate('navigation-main.phtml'); ?>

        <main>
            <?php echo $this->getContent(); ?>
        </main>

        <footer>
            <div class="container">
                <div class="column-4 nonprint" style="padding-right: 0.25em">
                    <h1>Neueste Artikel</h1>
                    <?php if (count(($articles = $this->orm->getLatestArticles(6))) > 0) : ?>
                        <ul class="nobullets">
                            <?php foreach ($articles as $article) : ?>
                                <li>
                                    <?php echo $this->htmlEncode($article->publishing_timestamp->format('d.m.')); ?>
                                    <a href="<?php echo $this->htmlConvUrl($article->getArticleUrl()); ?>"><?php echo $this->htmlEncode($article->headline); ?></a>
                                </li>
                            <?php endforeach; ?>
                        </ul>
                    <?php else : ?>
                        <p>Noch keine Artikel</p>
                    <?php endif; ?>
                </div>
                <div class="column-4 nonprint" style="padding: 0 0.25em">
                    <h1>Kommentare</h1>
                    <?php if (count(($comments = $this->orm->getLatestComments())) > 0) : ?>
                        <ul class="nobullets">
                            <?php foreach ($comments as $comment) : ?>
                                <li>
                                    <?php echo $comment->creation_timestamp->format('d.m.'); ?>
                                    <a href="javascript:void(0)">
                                        <?php echo $this->htmlEncode($comment->username); ?>
                                        zu
                                        <?php echo $this->htmlEncode($this->orm->getArticleHeadlineById($comment->article_id)); ?>
                                    </a>
                                </li>
                            <?php endforeach; ?>
                        </ul>
                    <?php else : ?>
                        <p>Noch keine Kommentare</p>
                    <?php endif; ?>
                </div>
                <div class="column-4 nonprint" style="padding-left: 0.25em">
                    <h1>Soziale Medien</h1>
                    <ul class="nobullets">
                        <li><a class="extern" href="http://instagram.com/agewert">Instagram</a></li>
                        <li><a class="extern" href="https://www.twitter.com/agewert">Twitter</a></li>
                        <li><a class="extern" href="https://www.facebook.com/andre.gewert">Facebook</a></li>
                    </ul>
                </div>
                <div style="clear: both; text-align: center; padding-top: 3rem">
                    <p><?php echo $this->htmlEncode($this->ncm->orm->getCopyrightNotice()); ?>&nbsp;&middot;
                        <?php if ($this->ncm->isUserLoggedIn()) : ?>
                            <a href="<?php echo $this->htmlConvUrl('/admin/index.php'); ?>">Verwaltung</a>
                            &middot;&nbsp;<a href="<?php echo $this->htmlConvUrl('/logout.php'); ?>">Abmelden</a>
                        <?php else : ?>
                            <a href="<?php echo $this->htmlConvUrl('/login.php'); ?>">Anmelden</a>
                        <?php endif; ?>
                    </p>
                </div>
            </div>
        </footer>
        <script src="<?php echo $this->htmlConvUrl('/ncm/js/jquery-3.3.1.min.js'); ?>"></script>
        <script src="<?php echo $this->htmlConvUrl('/tpl/ubergeek/ext/lightbox/js/lightbox.js'); ?>"></script>
        <script>
            lightbox.option({
                'fadeDuration':         200,
                'imageFadeDuration':    250,
                'resizeDuration':       250
            })
            hljs.initHighlightingOnLoad();
        </script>
    </body>
</html>